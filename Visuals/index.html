<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Model</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" href="static/css/style.css" />

    <!-- jquery script for prediction button -->

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- scroll-lock for title through the jumbotron -->

</head>

<body class="text-light bg-dark">
    <div class="container">
        <div class="sticky">
            <nav class="navbar navbar-dark bg-dark navbar-expand-lg">
                <a class="navbar-brand" href="index.html">
                    Final Project - Team Javascript
                </a>
            </nav>
        </div>
        <div class="jumbotron">
            <h1 class="display-4" >crash survival</h1>
            <p class="lead">Determining crash occupant outcome through the use of machine learning</p>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <br><br><br><br>
                <!-- Google slideshow - responsive elements in CSS -->

                <div class="responsive-google-slides">
                    <iframe
                        src="https://docs.google.com/presentation/d/e/2PACX-1vRCrE90zo-xaqw1t5iHV3tKJnT4UsMOYTXyR6HjkrtTSuHG1z8FiyM0dHWB5cwCF3Yjd0_4Si22dcWZ/embed?start=true&loop=true&delayms=15000"></iframe>
                </div>
            </div>
            <div id="description" class="col-sm-6">
                <br><br>
                <a> Minor Limitations of Our Initial Dataset:</a><br><br>
                <ul>
                    <li>Our machine learning model consists of US data from 1997-2002</li>
                    <br>
                    <li>Police-reported car crashes in which there was a harmful event (people or property)</li>
                    <br>
                    <li>Data are restricted to front-seat occupants, include only a subset of the variables recorded,
                        and are restricted in other ways also</li>
                    <br>
                    <li>All entries contain an event from which at least one vehicle was towed</li>
                </ul>
            </div>
        </div>
        <br><br><br>

        <br><br><br>

        <h2>Test Your Luck With Our Random Oversampling Model</h2>
        <h6 id="instructions">Select your features, "CLICK TO PREDICT", and see if you survive!</h6>
        <br>

        <!-- start of selection & prediction form -->

        <div>
            <form id="selectionForm" class="bg-dark" action="/result" method="post">
                <div class="row">
                    <div class="col-sm-3">
                        <ul class="list-group bg-dark">

                            <label for="OccupantPosition">Occupant Position:</label>
                            <i>Default value = Driver</i>

                            <select id="occ_pos" name="occ_pos">
                                <option value="0">Please Make A Selection:</option>
                                <option value="0">Driver</option>
                                <option value="1">Passenger</option>
                            </select>
                            <br><br>

                            <label for="sex">Sex of Occupant:</label>
                            <i>Default value = Female</i>

                            <select name="occ_sex" id="occ_sex">
                                <option value="0">Please Make A Selection:</option>
                                <option value="0">Female</option>
                                <option value="1">Male</option>
                            </select>
                            <br><br>

                            <label for="occupant_age">Age of Occupant:</label>
                            <i>Default value = 20 Years Old</i>

                            <select name="occ_age" id="occ_age">
                                <option value="20">Please Make A Selection:</option>
                                <option value="20">20 Years Old</option>
                                <option value="25">25 Years Old</option>
                                <option value="30">30 Years Old</option>
                                <option value="35">35 Years Old</option>
                                <option value="40">40 Years Old</option>
                                <option value="45">45 Years Old</option>
                                <option value="50">50 Years Old</option>
                                <option value="55">55 Years Old</option>
                                <option value="60">60 Years Old</option>
                                <option value="65">65 Years Old</option>
                                <option value="70">70 Years Old</option>
                                <option value="75">75 Years Old</option>
                                <option value="80">80 Years Old</option>
                            </select>
                            <br><br>

                        </ul>
                    </div>

                    <div class="col-sm-3">
                        <ul class="list-group bg-dark">

                            <label for="seatbelt">Seatbelt Buckled?:</label>
                            <i>Default value = Buckled</i>

                            <select name="sea_blt" id="sea_blt">
                                <option value="0">Please Make A Selection:</option>
                                <option value="0">Buckled</option>
                                <option value="1">Not Buckled</option>
                            </select>
                            <br><br>

                            <label for="impact_speed">Vehicle Speed:</label>
                            <i>Default value = 1 to 9 km/h</i>

                            <select name="imp_spd" id="imp_spd">
                                <option value="0">Please Make A Selection:</option>
                                <option value="0">1 to 9 km/h</option>
                                <option value="1">10 to 24 km/h</option>
                                <option value="2">25 to 39 km/h</option>
                                <option value="3">40 to 54 km/h</option>
                                <option value="4">55 km/h and Over</option>
                            </select>
                            <br><br>

                            <label for="airbag">Airbag Deployed?:</label>
                            <i>Default value = Deployed</i>

                            <select name="air_bag" id="air_bag">
                                <option value="0">Please Make A Selection:</option>
                                <option value="0">Airbag Deployed</option>
                                <option value="1">Airbag Not Deployed</option>
                            </select>
                            <br><br>
                        </ul>
                    </div>

                    <div class="col-sm-3">
                        <ul class="list-group bg-dark">

                            <label for="vehicle_year">Vehicle Year:</label>
                            <i>Default value = 2003</i>

                            <select name="veh_yer" id="veh_yer">
                                <option value="2003">Please Make A Selection:</option>
                                <option value="2000">2000</option>
                                <option value="1999">1999</option>
                                <option value="1998">1998</option>
                                <option value="1997">1997</option>
                                <option value="1996">1996</option>
                                <option value="1995">1995</option>
                                <option value="1994">1994</option>
                                <option value="1993">1993</option>
                                <option value="1992">1992</option>
                                <option value="1991">1991</option>
                                <option value="1990">1990</option>
                                <option value="1989">1989</option>
                                <option value="1988">1988</option>
                                <option value="1987">1987</option>
                                <option value="1986">1986</option>
                                <option value="1985">1985</option>
                                <option value="1984">1984</option>
                                <option value="1983">1983</option>
                                <option value="1982">1982</option>
                                <option value="1981">1981</option>
                                <option value="1980">1980</option>
                            </select>
                            <br><br>

                            <label for="front_impact">Front Impact?:</label>
                            <i>Default value = Yes</i>

                            <select name="fnt_imp" id="fnt_imp">
                                <option value="0">Please Make A Selection:</option>
                                <option value="0">Yes</option>
                                <option value="1">No</option>
                            </select>
                            <br><br>
                            <!-- predition & reset buttons -->
                            <input id="predict" type="submit" value="CLICK TO PREDICT">

                            <input id="reset" type="reset" value="reset selections"
                                onclick="document.getElementById('prediction').innerText=''">
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h5>Driving Tunes</h5>

                        <!-- audio source reference -->
                        <a href="https://www.bensound.com">bensound.com</a>

                        <audio controls>

                            <!-- bensound_punky is royalty-free if source is referenced -->
                            <source src="static/sounds/bensound-punky.mp3">

                            <!-- <source src="static/sounds/driving.mp3" type="audio/mpeg"> -->
                            Your browser does not support the audio element.
                        </audio>

                        <!-- adding Polaroid effect to the dummy & prediction result-->

                        <div id="polaroid" class="polaroid">
                            <img id="dummy" src="static/images/Dummy.gif">
                            <div class="container">
                                <h2 id="prediction">{{ prediction }}</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <br><br>
    </div>
    <h3 id="learn">Would you like to learn more about vehicle safety?</h3>
    <h3><a href="https://www.nhtsa.gov/ratings">* Visit the NHTSA government safety ratings *</a></h3>
    <!-- prediction result without refreshing the entire page -->

    <script>
        function refresh() {
            const prediction_button = document.getElementById("predict");
            prediction_button.onclick = function (event) {
                event.preventDefault();
                $.ajax({
                    url: '/result',
                    type: 'post',
                    data: $('#selectionForm').serialize(),
                    success: function (data) {
                        console.log(data)
                        $("#prediction").html(data)
                    }
                });
            }
        }
        refresh()
    </script>
    </div>
</body>

</html>